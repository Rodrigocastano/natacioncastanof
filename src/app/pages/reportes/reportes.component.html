<!-- ENCABEZADO -->
<p-toolbar class="mb-0 px-0">
  <div
    class="p-toolbar-group-left flex items-center gap-4"
    style="min-height: 72px;"
  >
    <img
      src="assets/image/natacion-castano1.png"
      alt="Logo Empresa"
      class="rounded-xl shadow-md"
      style="width: 80px; height: 80px; object-fit: contain;"
    />
    <div class="flex flex-col">
      <h2 class="m-0 text-xl font-bold">Reporte mensual de ingresos</h2>
      <span class="text-sm text-gray-600">Club Natación Castaño</span>
    </div>
  </div>
</p-toolbar>


<p-card>

  <div class="flex flex-wrap align-items-center gap-3 mb-4">
    <p-calendar
      [(ngModel)]="fechaInicio"
      view="month"
      dateFormat="mm/yy"
      placeholder="Desde"
      [showIcon]="true"
    />
    <p-calendar
      [(ngModel)]="fechaFin"
      view="month"
      dateFormat="mm/yy"
      placeholder="Hasta"
      [showIcon]="true"
    />
    <p-button
      label="Visualizar"
      icon="pi pi-search"
      (onClick)="buscarPagos()"
      class="p-button-info"
    />
    <p-button
      label="Descargar PDF"
      icon="pi pi-file-pdf"
      (onClick)="descargarPDF()"
      class="p-button-danger"
    />
    
  </div>

  <!-- TABLA -->
  <p-table
    *ngIf="ingresos.length"
    [value]="ingresos"
    [responsiveLayout]="'scroll'"
    class="p-datatable-sm"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Fecha</th>
        <th class="text-right">Plan pagados</th>
        <th class="text-right">Pagos mensual</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-row>
      <tr>
        <td>{{ row.mes }}</td>
        <td class="text-right">{{ row.cantidad_pagos }}</td>
        <td class="text-right">$ {{ row.total_abonado.toFixed(2) }}</td>
      </tr>
    </ng-template>
  </p-table>

  <!-- SIN DATOS -->
  <p
    *ngIf="!ingresos.length && fechaInicio && fechaFin "
    class="text-center text-color-secondary mt-3"
  >
    No se encontraron ingresos en el rango seleccionado.
  </p>
</p-card>
